<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atelier de G√©om√©trie</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="toolbar" role="toolbar">
        <div class="toolbar-row">
            <button id="tool-point" class="tool-btn" title="Point" aria-label="Point">
                <svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
            </button>
            <button id="tool-line" class="tool-btn" title="Segment / Droite" aria-label="Segment / Droite">
                <svg viewBox="0 0 24 24"><circle cx="4" cy="20" r="2"/><circle cx="20" cy="4" r="2"/><line x1="5.41" y1="18.59" x2="18.59" y2="5.41" stroke="currentColor" stroke-width="2"/></svg>
            </button>
            <button id="tool-compass" class="tool-btn" title="Compas" aria-label="Compas">
                <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 2L11 4L6 21h2l4-13 4 13h2L13 4z"/></svg>
            </button>
            <button id="tool-ruler" class="tool-btn" title="R√®gle" aria-label="R√®gle">
                <svg viewBox="0 0 24 24" fill-rule="evenodd"><path fill="currentColor" d="M2 9h20v6H2z M3 10h18v4H3z M5 10v1h1v-1z M7 10v2h1v-2z M9 10v1h1v-1z M11 10v2h1v-2z M13 10v1h1v-1z M15 10v2h1v-2z M17 10v1h1v-1z M19 10v2h1v-2z"/></svg>
            </button>
            <button id="tool-protractor" class="tool-btn" title="Rapporteur" aria-label="Rapporteur">
                <svg viewBox="0 0 24 24" class="stroked-icon"><path stroke-width="2" d="M2 12a10 10 0 0 1 20 0H2z"/><path d="M12 12V2"/><path d="m4.93 4.93 7.07 7.07"/><path d="m19.07 4.93-7.07 7.07"/></svg>
            </button>
            <button id="tool-setsquare" class="tool-btn" title="√âquerre" aria-label="√âquerre">
                <svg viewBox="0 0 24 24"><path d="M22 2v20H2L22 2zm-2 3.41L6.83 18H20V5.41z"/></svg>
            </button>
            <button id="tool-mark" class="tool-btn" title="Codage" aria-label="Codage">
                <svg viewBox="0 0 24 24"><path fill="currentColor" d="M14.06,9L15,9.94L5.92,19H5V18.08L14.06,9M17.66,3C17.41,3 17.15,3.1 16.96,3.29L15.13,5.12L18.88,8.87L20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18.17,3.09 17.92,3 17.66,3M14.06,6.19L3,17.25V21H6.75L17.81,9.94L14.06,6.19Z" /></svg>
            </button>
            <button id="tool-text" class="tool-btn" title="Texte" aria-label="Texte">
                <svg viewBox="0 0 24 24"><path d="M2.5 4v3h5v12h3V7h5V4h-13zm19 5h-9v3h3v7h3v-7h3V9z"/></svg>
            </button>
            <button id="tool-move" class="tool-btn" title="D√©placer" aria-label="D√©placer">
                <svg viewBox="0 0 24 24"><path d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"/></svg>
            </button>
            <button id="tool-eraser" class="tool-btn" title="Gomme" aria-label="Gomme">
                <svg viewBox="0 0 24 24"><path d="M16.5 1.5c-.96 0-1.84.38-2.47 1.01l-9.53 9.53c-.32.32-.5.75-.5 1.2v3.25c0 .41.34.75.75.75h3.25c.45 0 .88-.18 1.2-.5l9.53-9.53c.63-.63 1.01-1.51 1.01-2.47s-.38-1.84-1.01-2.47l-1.77-1.77c-.63-.63-1.51-1.01-2.47-1.01zm-1.06 1.06c.31 0 .59.13.8.33l1.77 1.77c.2.2.33.49.33.8s-.13.59-.33.8l-9.53 9.53c-.1.1-.23.17-.37.17h-2.25v-2.25c0-.14.07-.27.17-.37l9.53-9.53c.21-.2.49-.33.8-.33zM5.5 3.5c-.28 0-.5.22-.5.5v14c0 .28.22.5.5.5h10c.28 0 .5-.22.5-.5v-7.75c0-.28-.22-.5-.5-.5s-.5.22-.5.5V18h-9V4h7.75c.28 0 .5-.22.5-.5s-.22-.5-.5-.5h-8z"/></svg>
            </button>
            <div id="ruler-options" class="tool-options">
                <label for="ruler-length">Longueur (cm):</label>
                <input type="number" id="ruler-length" min="1" max="50" value="10">
            </div>
            <div id="compass-options" class="tool-options">
                <label for="compass-radius">Rayon (cm):</label>
                <input type="number" id="compass-radius" min="0.1" step="0.1" value="3">
            </div>
            <div class="separator"></div>
            <div id="color-picker-wrapper">
                <button id="current-color-display" class="color-swatch" title="Changer la couleur"></button>
                <div id="color-palette-popup">
                    <button class="color-swatch" data-color="#000000" title="Noir" aria-label="Noir"></button>
                    <button class="color-swatch" data-color="#FF0000" title="Rouge" aria-label="Rouge"></button>
                    <button class="color-swatch" data-color="#0000FF" title="Bleu" aria-label="Bleu"></button>
                    <button class="color-swatch" data-color="#008000" title="Vert" aria-label="Vert"></button>
                    <button class="color-swatch" data-color="#FFA500" title="Orange" aria-label="Orange"></button>
                </div>
            </div>
            <div class="separator"></div>
            <button id="btn-grid" class="tool-btn" title="Changer la grille" aria-label="Changer la grille">
                <svg viewBox="0 0 24 24"><path d="M10 10h4v4h-4v-4zm-6 0h4v4H4v-4zm12 0h4v4h-4v-4zM4 4h4v4H4V4zm6 0h4v4h-4V4zm6 0h4v4h-4V4zm-6 12h4v4h-4v-4zm-6 0h4v4H4v-4zm12 0h4v4h-4v-4z"/></svg>
            </button>
            <div class="separator"></div>
            <button id="btn-undo" title="Retour arri√®re (Ctrl+Z)" aria-label="Annuler">‚Ü∂</button>
            <button id="btn-redo" title="Retour avant (Ctrl+Y)" aria-label="R√©tablir">‚Ü∑</button>
            <div class="separator"></div>
            <button id="btn-clear">Effacer</button>
            <button id="btn-save">Sauvegarder</button>
            <button id="btn-load">Charger</button>
        </div>
        <div class="toolbar-row">
            <button id="btn-record" title="Enregistrer la construction" aria-label="Enregistrer la construction">‚è∫Ô∏è Enregistrer</button>
            <button id="btn-play" title="Relire la construction" aria-label="Relire la construction" disabled>‚ñ∂Ô∏è Relire</button>
            <label for="replay-loop">
                <input type="checkbox" id="replay-loop"> Boucle
            </label>
            <div class="separator"></div>
            <button id="btn-save-recording" title="Sauvegarder le film" aria-label="Sauvegarder le film" disabled>üíæ Enregistrer film</button>
            <button id="btn-load-recording" title="Charger un film" aria-label="Charger un film">üìÇ Charger film</button>
        </div>
        <!-- Input cach√© pour le chargement de fichier -->
        <input type="file" id="file-loader" accept=".json" hidden>
        <input type="file" id="recording-loader" accept=".json" hidden>
    </div>

    <main>
        <canvas id="drawing-canvas"></canvas>
    </main>

    <script type="module" src="script.js"></script>

</body>
</html>
