<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atelier de G√©om√©trie</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="toolbar" role="toolbar">
        <div class="toolbar-row">
            <button id="tool-point" class="tool-btn" title="Point" aria-label="Point">
                <svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
            </button>
            <button id="tool-line" class="tool-btn" title="Ligne" aria-label="Ligne">
                <svg viewBox="0 0 24 24"><path d="M21.71 3.29a1 1 0 0 0-1.42 0l-18 18a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l18-18a1 1 0 0 0 0-1.42z"/></svg>
            </button>
            <button id="tool-compass" class="tool-btn" title="Compas" aria-label="Compas">
                <svg viewBox="0 0 512 512"><path d="M256 0c-24.28 0-46.32 11.08-61.12 28.88l-33.6 39.2C150.3 81.96 144 99.4 144 117.5V128h-16c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h16v16c0 8.84 7.16 16 16 16h16c8.84 0 16-7.16 16-16v-16h16c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-16v-10.5c0-10.48 4.76-20.12 12.64-26.48l33.6-39.2C311.6 11.08 333.7 0 358.6 0c35.34 0 64 28.66 64 64v384c0 35.34-28.66 64-64 64s-64-28.66-64-64V160H217.4c-17.68 0-32 14.32-32 32v256c0 35.34-28.66 64-64 64s-64-28.66-64-64V64c0-35.34 28.66-64 64-64c24.28 0 46.32 11.08 61.12 28.88l33.6 39.2C262.7 81.96 268.1 99.4 268.1 117.5V128h22.54V64c0-35.34-28.66-64-64-64z"/></svg>
            </button>
            <button id="tool-ruler" class="tool-btn" title="R√®gle" aria-label="R√®gle">
                <svg viewBox="0 0 24 24"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 16H5V5h14v14zM7 10h2v4H7zm4 0h2v4h-2zm4 0h2v4h-2z"/></svg>
            </button>
            <button id="tool-protractor" class="tool-btn" title="Rapporteur" aria-label="Rapporteur">
                <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12h20C22 6.48 17.52 2 12 2zm0 14c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm-6-4h2c0 2.21 1.79 4 4 4v2c-3.31 0-6-2.69-6-6z"/></svg>
            </button>
            <button id="tool-setsquare" class="tool-btn" title="√âquerre" aria-label="√âquerre">
                <svg viewBox="0 0 24 24"><path d="M22 2v20H2L22 2zm-2 3.41L6.83 18H20V5.41z"/></svg>
            </button>
            <button id="tool-mark" class="tool-btn" title="Codage" aria-label="Codage">
                <svg viewBox="0 0 24 24"><path d="M3 12h18M11 8v8h2V8h-2z"/></svg>
            </button>
            <button id="tool-text" class="tool-btn" title="Texte" aria-label="Texte">
                <svg viewBox="0 0 24 24"><path d="M2.5 4v3h5v12h3V7h5V4h-13zm19 5h-9v3h3v7h3v-7h3V9z"/></svg>
            </button>
            <button id="tool-move" class="tool-btn" title="D√©placer" aria-label="D√©placer">
                <svg viewBox="0 0 24 24"><path d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"/></svg>
            </button>
            <button id="tool-eraser" class="tool-btn" title="Gomme" aria-label="Gomme">
                <svg viewBox="0 0 24 24"><path d="M16.5 1.5c-.96 0-1.84.38-2.47 1.01l-9.53 9.53c-.32.32-.5.75-.5 1.2v3.25c0 .41.34.75.75.75h3.25c.45 0 .88-.18 1.2-.5l9.53-9.53c.63-.63 1.01-1.51 1.01-2.47s-.38-1.84-1.01-2.47l-1.77-1.77c-.63-.63-1.51-1.01-2.47-1.01zm-1.06 1.06c.31 0 .59.13.8.33l1.77 1.77c.2.2.33.49.33.8s-.13.59-.33.8l-9.53 9.53c-.1.1-.23.17-.37.17h-2.25v-2.25c0-.14.07-.27.17-.37l9.53-9.53c.21-.2.49-.33.8-.33zM5.5 3.5c-.28 0-.5.22-.5.5v14c0 .28.22.5.5.5h10c.28 0 .5-.22.5-.5v-7.75c0-.28-.22-.5-.5-.5s-.5.22-.5.5V18h-9V4h7.75c.28 0 .5-.22.5-.5s-.22-.5-.5-.5h-8z"/></svg>
            </button>
            <div id="ruler-options" class="tool-options">
                <label for="ruler-length">Longueur (cm):</label>
                <input type="number" id="ruler-length" min="1" max="50" value="10">
            </div>
            <div class="separator"></div>
            <input type="color" id="color-picker" title="Choisir la couleur" aria-label="Choisir la couleur">
            <div class="separator"></div>
            <button id="btn-undo" title="Retour arri√®re (Ctrl+Z)" aria-label="Annuler">‚Ü∂</button>
            <button id="btn-redo" title="Retour avant (Ctrl+Y)" aria-label="R√©tablir">‚Ü∑</button>
            <div class="separator"></div>
            <button id="btn-clear">Effacer</button>
            <button id="btn-save">Sauvegarder</button>
            <button id="btn-load">Charger</button>
        </div>
        <div class="toolbar-row">
            <button id="btn-record" title="Enregistrer la construction" aria-label="Enregistrer la construction">‚è∫Ô∏è Enregistrer</button>
            <button id="btn-play" title="Relire la construction" aria-label="Relire la construction" disabled>‚ñ∂Ô∏è Relire</button>
            <label for="replay-loop">
                <input type="checkbox" id="replay-loop"> Boucle
            </label>
            <div class="separator"></div>
            <button id="btn-save-recording" title="Sauvegarder le film" aria-label="Sauvegarder le film" disabled>üíæ Enregistrer film</button>
            <button id="btn-load-recording" title="Charger un film" aria-label="Charger un film">üìÇ Charger film</button>
        </div>
        <div class="toolbar-row">
            <label for="grid-select">Grille :</label>
            <select id="grid-select">
                <option value="none" selected>Aucune</option>
                <option value="cm">Carreaux 1cm</option>
                <option value="orthonormal">Rep√®re orthonorm√©</option>
            </select>
        </div>
        <!-- Input cach√© pour le chargement de fichier -->
        <input type="file" id="file-loader" accept=".json" hidden>
        <input type="file" id="recording-loader" accept=".json" hidden>
    </div>

    <main>
        <canvas id="drawing-canvas"></canvas>
    </main>

    <script type="module" src="script.js"></script>

</body>
</html>
